{# core/recipe_detail.html #}
{% extends "core/base.html" %}
{% load static %}

{% block title %}{{ recipe.title|default:"Recipe" }} — Smart Recipe{% endblock %}

{% block content %}
<div class="container my-4">
  <a href="javascript:history.back()" class="btn btn-link p-0">&larr; Back</a>

  <h2 class="mt-2 mb-3">{{ recipe.title|default:"Recipe" }}</h2>

  {% if recipe.image %}
    <img src="{{ recipe.image }}" alt="{{ recipe.title }}" class="img-fluid rounded shadow-sm mb-4">
  {% endif %}

  <div class="text-muted small mb-4">
    {% if recipe.readyInMinutes %}⏱ {{ recipe.readyInMinutes }} min{% endif %}
    {% if recipe.readyInMinutes and recipe.servings %}&nbsp;·&nbsp;{% endif %}
    {% if recipe.servings %}👥 {{ recipe.servings }} servings{% endif %}
    {% if recipe.sourceUrl %}&nbsp;·&nbsp;<a href="{{ recipe.sourceUrl }}" target="_blank" rel="noopener">Source</a>{% endif %}
  </div>

  <div class="row g-4">
    <div class="col-12 col-lg-6">
      <h4 class="mb-2">Ingredients</h4>
      <ul class="ps-3">
        {% if display_ingredients %}
          {% for line in display_ingredients %}<li>{{ line }}</li>{% endfor %}
        {% else %}
          <li class="text-muted">No ingredients provided.</li>
        {% endif %}
      </ul>
    </div>

    <div class="col-12 col-lg-6">
      <h4 class="mb-2">Instructions</h4>
        <ol class="ps-3">
          {% if display_steps %}
            {% for s in display_steps %}<li>{{ s }}</li>{% endfor %}
          {% else %}
            {% if recipe.sourceUrl %}
              <li>Open the source link for full step-by-step instructions.</li>
            {% else %}
              <li class="text-muted">No instructions provided.</li>
            {% endif %}
          {% endif %}
        </ol>

    </div>
  </div>

  {% if recipe.summary %}
    <div class="mt-4 text-muted small">{{ recipe.summary|safe }}</div>
  {% endif %}
</div>
{% endblock %}
