{% extends "core/base.html" %}
{% load static %}

<!-- ---------------------------------------------------------------------------
  templates/core/home.html
  - Uses Bootstrap 5.3 color-mode aware utilities for good contrast in light/dark
  - NO inline <style>; all presentational rules come from theme.css
  - Hero artwork uses classes defined in theme.css:
      .hero, .hero--glass, .hero-art, .hero-photo, .hero-photo-a/b/c
  - Only location that shows guest Login/Register CTAs is this hero
  - "Take a tour" button (id="startTourBtn") works with your tour.js
--------------------------------------------------------------------------- -->

{% block title %}Smart Recipe{% endblock %}

<!--  Optional page marker + enables the site tour  -->
{% block body_attrs %} data-page="home" data-enable-tour="1" {% endblock %}

{% block head_extra %}
  <!--  Keep tour stylesheet only; no inline CSS here #} -->
  <link rel="stylesheet" href="{% static 'css/tour.css' %}?v=20250925">
{% endblock %}

{% block content %}

  <!--  Flash messages  -->
  {% if messages %}
    <div class="mt-3">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} mb-2" role="alert">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- ============================== HERO ============================== -->
  <section class="py-5 py-lg-6 hero hero--glass">
    <div class="container">
      <div class="row align-items-center g-5">

        <!-- Left: headline + actions  -->
        <div class="col-12 col-lg-6">
          <h1 class="display-5 fw-semibold text-body-emphasis mb-3">
            From fridge → recipe in seconds
          </h1>
          <p class="lead text-body-secondary mb-4">
            Save ingredients, get AI-powered matches, plan meals, and hit your nutrition targets.
          </p>

          <!-- Resolve login/register URLs with fallbacks -->
          {% url 'login' as login_url %}{% if not login_url %}{% url 'account_login' as login_url %}{% endif %}
          {% url 'accounts:register' as register_url %}
          {% if not register_url %}{% url 'register' as register_url %}{% endif %}
          {% if not register_url %}{% url 'account_signup' as register_url %}{% endif %}

          <!-- Primary actions (single place with auth CTAs for guests) -->
          <div class="d-flex flex-wrap gap-2">
            <a href="#" id="startTourBtn" class="btn btn-outline-secondary btn-lg">
              <i class="bi bi-rocket-takeoff me-2"></i>Take a tour
            </a>

            {% if not user.is_authenticated %}
              {% if login_url %}
                <a class="btn btn-primary btn-lg" href="{{ login_url }}">
                  <i class="bi bi-box-arrow-in-right me-2"></i>Login
                </a>
              {% endif %}
              {% if register_url %}
                <a class="btn btn-outline-primary btn-lg" href="{{ register_url }}">
                  <i class="bi bi-person-plus me-2"></i>Register
                </a>
              {% endif %}
            {% else %}
              <a class="btn btn-primary btn-lg" href="{% url 'core:dashboard' %}">
                <i class="bi bi-speedometer2 me-2"></i>Open dashboard
              </a>
            {% endif %}
          </div>

          <p class="text-body-secondary small mt-3 mb-0">
            No credit card required. You can explore the tour any time.
          </p>
        </div>

        <!-- --- Right: hero artwork stack ---
           Uses theme.css classes:
           .hero-art container + 3 positioned .hero-photo elements (a/b/c)
         -->
        <div class="col-12 col-lg-6">
          <div class="hero-art">
            <div class="hero-photo hero-photo-a">
              <img src="{% static 'img/hero/ingredients.jpg' %}" alt="Ingredients" class="w-100 h-100 object-fit-cover">
            </div>
            <div class="hero-photo hero-photo-b">
              <img src="{% static 'img/hero/recipe.jpg' %}" alt="Recipe preview" class="w-100 h-100 object-fit-cover">
            </div>
            <div class="hero-photo hero-photo-c">
              <img src="{% static 'img/hero/meal-plan.jpg' %}" alt="Meal plan preview" class="w-100 h-100 object-fit-cover">
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>
  <!-- ============================ END HERO ============================ -->

  <!-- ========================== FEATURE STRIP ========================= -->
  <section class="py-5 border-top">
    <div class="container">
      <div class="row g-4">
        <div class="col-12 col-md-4">
          <div class="h-100 d-flex">
            <i class="bi bi-basket2 flex-shrink-0 fs-3 me-3"></i>
            <div>
              <h5 class="mb-1">Pantry → Matches</h5>
              <p class="text-body-secondary mb-0">Store what you have; we’ll match recipes instantly.</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="h-100 d-flex">
            <i class="bi bi-calendar-check flex-shrink-0 fs-3 me-3"></i>
            <div>
              <h5 class="mb-1">Plan your week</h5>
              <p class="text-body-secondary mb-0">Build a balanced meal plan with a couple of clicks.</p>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="h-100 d-flex">
            <i class="bi bi-activity flex-shrink-0 fs-3 me-3"></i>
            <div>
              <h5 class="mb-1">Hit your targets</h5>
              <p class="text-body-secondary mb-0">Track macros and stick to your goals without the faff.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- ====================== END FEATURE STRIP ========================= -->

{% endblock content %}

{% block body_scripts %}
  {{ block.super }}
  <!-- Nothing else here; all behavior is in external JS files -->
{% endblock %}
