{% extends "core/base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<h4 class="mb-3">Your Pantry</h4>
<form class="row g-2" method="post" action="{% url 'add_ingredient' %}">
  {% csrf_token %}
  <div class="col-md-4">{{ form.name }}</div>
  <div class="col-md-3">{{ form.quantity }}</div>
  <div class="col-md-3">{{ form.unit }}</div>
  <div class="col-md-2"><button class="btn btn-primary w-100">Add</button></div>
</form>

<table class="table table-sm table-striped mt-3">
  <thead><tr><th>Name</th><th>Qty</th><th>Unit</th><th></th></tr></thead>
  <tbody>
    {% for ing in ingredients %}
      <tr>
        <td>{{ ing.name }}</td>
        <td>{{ ing.quantity }}</td>
        <td>{{ ing.unit }}</td>
        <td class="text-end">
          <form method="post" action="{% url 'delete_ingredient' ing.pk %}">
            {% csrf_token %}
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="4" class="text-muted">No ingredients yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div class="d-flex gap-2">
  <form method="post" class="d-flex gap-2 align-items-center mt-3">
    {% csrf_token %}
    <label class="me-2 fw-semibold">Recipe type:</label>
    <select name="kind" class="form-select w-auto">
      <option value="food" selected>Food</option>
      <option value="drink">Drink</option>
    </select>

    <!-- These two buttons POST the same form to different endpoints -->
    <button class="btn btn-success" formaction="{% url 'ai_recipes' %}">Get AI Recipes</button>
    <button class="btn btn-outline-primary" formaction="{% url 'web_recipes' %}">Search the Web</button>
  </form>


  <!-- Space for “Search the Web” (Edamam) later -->
</div>
{% endblock %}
